import{f as C,r as m,j as e,g as _,h as B,i as Z,o as M,l as J,k as Q,m as U,F as X,n as $,p as D,q as P,e as T,t as ee}from"./index-DJ8sexXN.js";import{b as se,c as K,u as ae,F as x,a as p,I as f,S as te}from"./use-toast-BXgmuXfu.js";import{B as k,H as z}from"./heading-iMxg-re2.js";import{S as q}from"./simple-grid-CuqY1g_w.js";import{B as A,d as ne}from"./button-BLaV3_SP.js";import{T as V}from"./text-DsZGIkQi.js";function re(a,t){const n={},r={};for(const[o,l]of Object.entries(a))t.includes(o)?n[o]=l:r[o]=l;return[n,r]}const L=C((a,t)=>{const{icon:n,children:r,isRound:o,"aria-label":l,...d}=a,h=n||r,j=m.isValidElement(h)?m.cloneElement(h,{"aria-hidden":!0,focusable:!1}):null;return e.jsx(A,{px:"0",py:"0",borderRadius:o?"full":void 0,ref:t,"aria-label":l,...d,children:j})});L.displayName="IconButton";function O(a){const{viewBox:t="0 0 24 24",d:n,displayName:r,defaultProps:o={}}=a,l=m.Children.toArray(a.path),d=C((h,j)=>e.jsx(se,{ref:j,viewBox:t,...o,...h,children:l.length?l:e.jsx("path",{fill:"currentColor",d:n})}));return d.displayName=r,d}const W=C(function(t,n){const{children:r,placeholder:o,className:l,...d}=t;return e.jsxs(_.select,{...d,ref:n,className:B("chakra-select",l),children:[o&&e.jsx("option",{value:"",children:o}),r]})});W.displayName="SelectField";const G=C((a,t)=>{const n=Z("Select",a),{rootProps:r,placeholder:o,icon:l,color:d,height:h,h:j,minH:N,minHeight:R,iconColor:v,iconSize:S,...y}=M(a),[b,w]=re(y,J),I=K(w),g={width:"100%",height:"fit-content",position:"relative",color:d},E={paddingEnd:"2rem",...n.field,_focus:{zIndex:"unset",...n.field?._focus}};return e.jsxs(_.div,{className:"chakra-select__wrapper",__css:g,...b,...r,children:[e.jsx(W,{ref:t,height:j??h,minH:N??R,placeholder:o,...I,__css:E,children:a.children}),e.jsx(Y,{"data-disabled":ne(I.disabled),...(v||d)&&{color:v||d},__css:n.icon,...S&&{fontSize:S},children:l})]})});G.displayName="Select";const oe=a=>e.jsx("svg",{viewBox:"0 0 24 24",...a,children:e.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),ie=_("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),Y=a=>{const{children:t=e.jsx(oe,{}),...n}=a,r=m.cloneElement(t,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return e.jsx(ie,{...n,className:"chakra-select__icon-wrapper",children:m.isValidElement(t)?r:null})};Y.displayName="SelectIcon";const ce=["h","minH","height","minHeight"],H=C((a,t)=>{const n=Q("Textarea",a),{className:r,rows:o,...l}=M(a),d=K(l),h=o?U(n,ce):n;return e.jsx(_.textarea,{ref:t,rows:o,...d,className:B("chakra-textarea",r),__css:h})});H.displayName="Textarea";const le=O({d:"M0,12a1.5,1.5,0,0,0,1.5,1.5h8.75a.25.25,0,0,1,.25.25V22.5a1.5,1.5,0,0,0,3,0V13.75a.25.25,0,0,1,.25-.25H22.5a1.5,1.5,0,0,0,0-3H13.75a.25.25,0,0,1-.25-.25V1.5a1.5,1.5,0,0,0-3,0v8.75a.25.25,0,0,1-.25.25H1.5A1.5,1.5,0,0,0,0,12Z",displayName:"AddIcon"}),de=O({displayName:"DeleteIcon",path:e.jsx("g",{fill:"currentColor",children:e.jsx("path",{d:"M19.452 7.5H4.547a.5.5 0 00-.5.545l1.287 14.136A2 2 0 007.326 24h9.347a2 2 0 001.992-1.819L19.95 8.045a.5.5 0 00-.129-.382.5.5 0 00-.369-.163zm-9.2 13a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zm5 0a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zM22 4h-4.75a.25.25 0 01-.25-.25V2.5A2.5 2.5 0 0014.5 0h-5A2.5 2.5 0 007 2.5v1.25a.25.25 0 01-.25.25H2a1 1 0 000 2h20a1 1 0 000-2zM9 3.75V2.5a.5.5 0 01.5-.5h5a.5.5 0 01.5.5v1.25a.25.25 0 01-.25.25h-5.5A.25.25 0 019 3.75z"})})});function ue(){const a=ae(),[t,n]=m.useState([]);m.useEffect(()=>{async function s(){const c=(await $(D(T,"users"))).docs.map(u=>({id:u.id,...u.data()})).filter(u=>u.role==="cliente");n(c)}s()},[]);const[r,o]=m.useState(""),[l,d]=m.useState(""),[h,j]=m.useState(""),[N,R]=m.useState(""),[v,S]=m.useState(""),[y,b]=m.useState([{nome:"",series:"",reps:"",descansoSegundos:"",cargaRecomendadaKg:"",instrucoes:""}]),w=()=>{b(s=>[...s,{nome:"",series:"",reps:"",descansoSegundos:"",cargaRecomendadaKg:"",instrucoes:""}])},I=s=>{b(i=>i.filter((c,u)=>u!==s))},g=(s,i,c)=>{b(u=>{const F=[...u];return F[s][i]=c,F})},E=async s=>{if(s.preventDefault(),!r||!l||!v||!y.length){a({title:"Preenche os campos obrigatórios",status:"warning"});return}try{const i=await P(D(T,"treinos"),{clienteId:r,trainerId:null,nome:l,objetivos:h,duracaoMin:Number(N),data:new Date(v),createdAt:ee()}),c=D(T,"treinos",i.id,"exercicios");await Promise.all(y.map(u=>P(c,{nome:u.nome,series:Number(u.series),reps:Number(u.reps),descansoSegundos:Number(u.descansoSegundos),cargaRecomendadaKg:Number(u.cargaRecomendadaKg),instrucoes:u.instrucoes}))),a({title:"Treino criado com sucesso!",status:"success"}),o(""),d(""),j(""),R(""),S(""),b([{nome:"",series:"",reps:"",descansoSegundos:"",cargaRecomendadaKg:"",instrucoes:""}])}catch(i){console.error(i),a({title:"Erro ao criar treino",status:"error"})}};return e.jsxs(k,{p:6,bg:"white",rounded:"md",shadow:"md",children:[e.jsx(z,{size:"md",mb:4,children:"Novo Treino"}),e.jsxs("form",{onSubmit:E,children:[e.jsxs(q,{columns:{base:1,md:2},spacing:4,children:[e.jsxs(x,{isRequired:!0,children:[e.jsx(p,{children:"Cliente"}),e.jsx(G,{placeholder:"Seleciona o cliente",value:r,onChange:s=>o(s.target.value)}),t.map(s=>e.jsx("option",{value:s.id,children:s.firstName||s.email},s.id))]}),e.jsxs(x,{isRequired:!0,children:[e.jsx(p,{children:"Data"}),e.jsx(f,{type:"date",value:v,onChange:s=>S(s.target.value)})]}),e.jsxs(x,{isRequired:!0,children:[e.jsx(p,{children:"Nome do Treino"}),e.jsx(f,{value:l,onChange:s=>d(s.target.value)})]}),e.jsxs(x,{children:[e.jsx(p,{children:"Objetivos"}),e.jsx(H,{value:h,onChange:s=>j(s.target.value)})]}),e.jsxs(x,{children:[e.jsx(p,{children:"Duração (min)"}),e.jsx(f,{type:"number",value:N,onChange:s=>R(s.target.value)})]})]}),e.jsxs(te,{spacing:6,mt:6,children:[e.jsx(z,{size:"sm",children:"Exercícios"}),y.map((s,i)=>e.jsxs(k,{p:4,bg:"gray.50",rounded:"md",children:[e.jsxs(X,{justify:"space-between",align:"center",children:[e.jsxs(V,{fontWeight:"bold",children:["Exercício ",i+1]}),e.jsx(L,{"aria-label":"Remover exercício",icon:e.jsx(de,{}),size:"sm",onClick:()=>I(i)})]}),e.jsxs(q,{columns:2,spacing:3,mt:3,children:[e.jsxs(x,{isRequired:!0,children:[e.jsx(p,{children:"Nome"}),e.jsx(f,{value:s.nome,onChange:c=>g(i,"nome",c.target.value)})]}),e.jsxs(x,{isRequired:!0,children:[e.jsx(p,{children:"Séries"}),e.jsx(f,{type:"number",value:s.series,onChange:c=>g(i,"series",c.target.value)})]}),e.jsxs(x,{isRequired:!0,children:[e.jsx(p,{children:"Reps"}),e.jsx(f,{type:"number",value:s.reps,onChange:c=>g(i,"reps",c.target.value)})]}),e.jsxs(x,{children:[e.jsx(p,{children:"Descanso (s)"}),e.jsx(f,{type:"number",value:s.descansoSegundos,onChange:c=>g(i,"descansoSegundos",c.target.value)})]}),e.jsxs(x,{isRequired:!0,children:[e.jsx(p,{children:"Carga Recomendada (kg)"}),e.jsx(f,{type:"number",value:s.cargaRecomendadaKg,onChange:c=>g(i,"cargaRecomendadaKg",c.target.value)})]}),e.jsxs(x,{children:[e.jsx(p,{children:"Instruções"}),e.jsx(H,{value:s.instrucoes,onChange:c=>g(i,"instrucoes",c.target.value)})]})]})]},i)),e.jsx(A,{leftIcon:e.jsx(le,{}),variant:"outline",onClick:w,children:"Adicionar Exercício"})]}),e.jsx(A,{mt:6,colorScheme:"blue",type:"submit",children:"Criar Treino"})]})]})}function fe({user:a,profile:t}){return e.jsxs(k,{p:8,children:[e.jsx(z,{mb:4,children:"Dashboard Trainer"}),e.jsxs(V,{mb:6,children:["Bem-vindo, ",t.firstName||t.email,"! Crie aqui os teus treinos."]}),e.jsx(ue,{})]})}export{fe as default};
