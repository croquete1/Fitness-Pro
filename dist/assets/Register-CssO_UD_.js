import{r as i,u as f,j as e,F as j,L as b,c as w,a as y,b as S,d as C,e as v}from"./index-DJ8sexXN.js";import{u as F,S as B,F as l,a as c,I as u}from"./use-toast-BXgmuXfu.js";import{B as E,H as R}from"./heading-iMxg-re2.js";import{B as L}from"./button-BLaV3_SP.js";import{T as d}from"./text-DsZGIkQi.js";function k(){const[t,m]=i.useState(""),[a,h]=i.useState(""),[x,n]=i.useState(!1),r=F(),g=f(),p=async s=>{if(s.preventDefault(),!t||!a){r({title:"Preenche todos os campos.",status:"warning",isClosable:!0});return}n(!0);try{const o=await w(y,t,a);await S(C(v,"users",o.user.uid),{email:t,role:"cliente"}),r({title:"Conta criada!",status:"success",isClosable:!0}),g("/",{replace:!0})}catch(o){r({title:"Falha no registo",description:o.message,status:"error",isClosable:!0})}finally{n(!1)}};return e.jsx(j,{minH:"100vh",align:"center",justify:"center",bg:"gray.50",children:e.jsxs(E,{bg:"white",p:8,rounded:"md",shadow:"lg",w:"full",maxW:"md",children:[e.jsx(R,{mb:6,textAlign:"center",children:"Registar Conta"}),e.jsx("form",{onSubmit:p,children:e.jsxs(B,{spacing:4,children:[e.jsxs(l,{children:[e.jsx(c,{children:"Email"}),e.jsx(u,{type:"email",placeholder:"email@exemplo.com",value:t,onChange:s=>m(s.target.value),autoFocus:!0})]}),e.jsxs(l,{children:[e.jsx(c,{children:"Password"}),e.jsx(u,{type:"password",placeholder:"••••••••",value:a,onChange:s=>h(s.target.value)})]}),e.jsx(L,{colorScheme:"green",type:"submit",isLoading:x,loadingText:"Registando…",w:"full",children:"Registar"})]})}),e.jsxs(d,{textAlign:"center",fontSize:"sm",mt:4,children:["Já tens conta?"," ",e.jsx(d,{as:b,to:"/",color:"blue.500",children:"Iniciar Sessão"})]})]})})}export{k as default};
