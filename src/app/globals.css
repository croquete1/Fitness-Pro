/* =======================================================================
   Tailwind layers (se usas Tailwind, mantém estas 3 linhas no topo)
   ======================================================================= */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ================================ */
/* ========== RESET BASE ========== */
/* ================================ */
*,
*::before,
*::after { box-sizing: border-box; }

html, body { height: 100%; }
html { -webkit-text-size-adjust: 100%; }

body{
  margin:0;
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  color:var(--fg);
  background:
    radial-gradient(1200px 800px at -10% -10%, rgba(59,130,246,.08), transparent 60%),
    radial-gradient(1000px 700px at 110% -10%, rgba(16,185,129,.05), transparent 60%),
    var(--bg);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  overscroll-behavior-y: none;
}

:focus { outline:none; }
:focus-visible { box-shadow: var(--ring); }
::selection { background: color-mix(in srgb, var(--primary) 25%, transparent); }
[data-auth-root]{ min-height:100dvh; }

/* =============================== */
/* ========== DESIGN TOKENS ====== */
/* =============================== */
:root{
  /* Base */
  --bg:#f7f9fc;
  --fg:#0f172a;
  --muted-fg:#5b677a;
  --border:#e8ecf2;

  /* Cards / Header */
  --card:#ffffff;
  --card-bg:var(--card);
  --header-bg: rgba(255,255,255,0.78);

  /* Sombras */
  --shadow-1: 0 8px 24px rgba(15,23,42,.06), 0 2px 6px rgba(15,23,42,.04);
  --shadow-2: 0 20px 60px rgba(15,23,42,.12), 0 4px 10px rgba(15,23,42,.06);

  /* Primários / acentos */
  --primary:#3b82f6;
  --primary-600:#2563eb;
  --accent:#7c3aed;
  --accent-2:#06b6d4;

  /* Paleta extra */
  --blue:#3b82f6;
  --violet:#7c3aed;
  --teal:#06b6d4;
  --pink:#ec4899;
  --amber:#f59e0b;

  /* Estado */
  --success:#10b981;
  --warning:#f59e0b;
  --danger:#ef4444;
  --info:#3b82f6;

  /* Botões e superfícies */
  --btn-bg:var(--card);
  --hover:#eef2f7;

  /* Focus ring */
  --ring:0 0 0 3px rgba(59,130,246,.3);

  /* Sidebar */
  --sidebar-bg:#ffffff;
  --sidebar-fg:#0f172a;
  --sidebar-muted:#7b8797;
  --sidebar-hover:#eef2ff;
  --sidebar-active:#e5eeff;

  /* Sidebar sizes/anim */
  --sb-collapsed:64px;
  --sb-expanded:260px;
  --sb-ease:cubic-bezier(.18,.9,.22,1);
  --sb-dur:260ms;

  /* Larguras controladas pelos data-attrs no <html> */
  --sb-w:var(--sb-expanded);

  /* App Shell */
  --sidebar-w:var(--sb-w);
  --header-h:56px;

  /* Safe areas */
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
}

/* Estado da sidebar (pinned × collapsed) */
:root { --sb-w: var(--sb-expanded); }
html[data-sb-pinned="0"]{ --sb-w: var(--sb-collapsed); }
html[data-sb-pinned="1"][data-sb-collapsed="1"]{ --sb-w: var(--sb-collapsed); }
html[data-sb-pinned="1"]:not([data-sb-collapsed="1"]){ --sb-w: var(--sb-expanded); }

/* Compat legado */
html[data-sb-collapsed="1"],
html[data-sidebar="collapsed"]{
  --sb-w:var(--sb-collapsed);
  --sidebar-w:var(--sb-collapsed);
}

/* =============================== */
/* ========== DARK MODE ========== */
/* =============================== */
[data-theme="dark"]{
  --bg:#0b1220;
  --fg:#e5e7eb;
  --muted-fg:#a7b1c2;
  --border:#1f2937;

  --card:#0f172a;
  --card-bg:var(--card);
  --header-bg: rgba(16,24,40,.55);

  --primary:#60a5fa;
  --primary-600:#3b82f6;

  --sidebar-bg:#0f172a;
  --sidebar-fg:#e5e7eb;
  --sidebar-muted:#9aa6b2;
  --sidebar-hover:#141b23;
  --sidebar-active:#1b2432;

  --accent:#8b5cf6;
  --accent-2:#22d3ee;

  --pink:#f472b6;
  --amber:#fbbf24;
}

/* ================================ */
/* ========== ELEMENTARES ========= */
/* ================================ */
a{ color:inherit; text-decoration:none; }
button{ border:0; background:none; color:inherit; font:inherit; cursor:pointer; }
input,select,textarea{
  color:inherit; background:var(--card-bg); border:1px solid var(--border);
  border-radius:10px; padding:10px 12px; outline:none;
}
input:focus,select:focus,textarea:focus{ box-shadow:var(--ring); border-color:var(--primary); }

/* ============================== */
/* ========== BOTÕES ============ */
/* ============================== */
.btn{
  display:inline-flex; align-items:center; justify-content:center;
  gap:8px; padding:10px 14px; border-radius:12px;
  border:1px solid var(--border); background:var(--btn-bg); color:var(--fg);
  transition: filter .12s ease, transform .12s ease, background .12s ease, border-color .12s ease;
}
.btn:hover{ filter:brightness(.98); }
.btn:active{ transform:translateY(.5px); }
.btn:disabled{ opacity:.6; cursor:not-allowed; }
.btn.primary{
  background:linear-gradient(180deg, color-mix(in srgb, var(--primary) 96%, transparent), var(--primary-600));
  color:#fff; border-color: color-mix(in srgb, var(--primary-600) 80%, var(--primary));
  box-shadow: 0 6px 18px color-mix(in srgb, var(--primary) 28%, transparent);
}
.btn.primary:hover{ filter:none; background:var(--primary-600); }
.btn.ghost{ background:transparent; }
.btn.ghost:hover{ background:var(--sidebar-hover); }
.btn.icon{ padding:8px; border-radius:10px; width:36px; height:36px; }
.btn.icon:hover{ background:var(--sidebar-hover); }
.btn.chip{ padding:4px 8px; border-radius:999px; }

/* ================================ */
/* ========== APP SHELL =========== */
/* ================================ */
.fp-shell{
  display:grid;
  min-height:100dvh;
  grid-template-columns: var(--sb-w) minmax(0,1fr);
}
.fp-main,.fp-content{ min-width:0; width:100%; }
.fp-main{ padding:24px; }

/* Header (sticky global) */
.fp-header{
  position:sticky; top:0; z-index:40;
  background: color-mix(in srgb, var(--bg) 88%, var(--card) 12%);
  border-bottom:1px solid var(--border);
  backdrop-filter:saturate(140%) blur(6px);
}
.fp-header-inner{
  display:grid; grid-template-columns:minmax(240px,1fr) auto;
  align-items:center; gap:12px; padding:10px 16px;
}

/* ================================= */
/* ========== SIDEBAR ============== */
/* ================================= */
/* intensificar active */
.fp-sidebar .nav-item[data-active="true"]{
  background: linear-gradient(90deg, color-mix(in srgb, var(--primary) 20%, transparent), transparent 70%);
  color: color-mix(in srgb, var(--primary) 40%, var(--sidebar-fg));
  border: 1px solid color-mix(in srgb, var(--primary) 25%, var(--border));
}

/* Mobile drawer */
@media (max-width: 1023px){
  .fp-shell{ grid-template-columns: 0 minmax(0,1fr); }
  html[data-sb-mobile-open="1"] .fp-shell{
    grid-template-columns: var(--sb-expanded) minmax(0,1fr);
  }
  .fp-sidebar{
    position: sticky; top: 0; height: 100dvh; box-shadow: 0 8px 32px rgba(0,0,0,.22);
  }
  .fp-sb-overlay{
    content:""; position: fixed; inset: 0; backdrop-filter: blur(2px);
    background: rgba(2,6,23,.35); z-index: 25; display:none;
  }
  html[data-sb-mobile-open="1"] .fp-sb-overlay{ display:block; }
}

/* Cabeçalho da sidebar */
.fp-sb-head{
  display:grid; grid-template-columns:1fr auto; align-items:center;
  padding:10px; gap:8px; min-height:56px;
}
.fp-sb-brand{ display:flex; align-items:center; gap:10px; }
.fp-sb-brand .logo{
  width:32px; height:32px; border-radius:10px; object-fit:contain;
}
.brand-name{ font-weight:800; font-size:14px; letter-spacing:.2px; line-height:1.15; }
.brand-role{ font-size:12px; color:var(--sidebar-muted); line-height:1.1; }

/* Toggle ÚNICO da sidebar (animado) */
.sb-toggle{
  position:absolute; right:-14px; top:12px; z-index:65;
  width:28px; height:28px; border-radius:999px;
  background:var(--card); border:1px solid var(--border);
  box-shadow:0 6px 16px rgba(2,6,23,.08);
  display:flex; align-items:center; justify-content:center;
  transition: transform var(--sb-dur) var(--sb-ease), box-shadow .2s ease, background .2s ease;
}
.sb-toggle:hover{ background:var(--hover); box-shadow:0 10px 24px rgba(2,6,23,.12); }
.sb-toggle .chev{
  display:block; width:12px; height:12px; border-right:2px solid currentColor; border-bottom:2px solid currentColor;
  transform: rotate(45deg); transition: transform var(--sb-dur) var(--sb-ease);
}
html[data-sb-collapsed="1"] .sb-toggle .chev{ transform: rotate(-135deg); }

/* Navegação */
.fp-nav{ display:grid; gap:8px; padding:8px; }
.nav-section{ margin:8px 6px 4px; color:var(--sidebar-muted); font-size:12px; text-transform:uppercase; }
.nav-group{ display:grid; gap:6px; }

.fp-sidebar .nav-item{
  display:grid; grid-template-columns:24px 1fr; align-items:center; gap:10px;
  padding:9px 10px; border-radius:12px; color:var(--sidebar-fg);
  background:transparent;
  transition: background var(--sb-dur) var(--sb-ease), color .18s ease;
}
.fp-sidebar .nav-item:hover{ background:var(--sidebar-hover); }

/* Apenas item ativo recebe destaque */
.fp-sidebar .nav-item[data-active="true"],
.fp-sidebar .nav-item[aria-current="page"],
.fp-sidebar a.nav-item[aria-current="page"]{
  background:var(--sidebar-active);
  color: color-mix(in srgb, var(--primary) 24%, var(--sidebar-fg));
  box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--primary) 18%, transparent);
}

.nav-icon{ display:inline-flex; align-items:center; justify-content:center; }
.nav-icon svg{ width:20px; height:20px; }
.nav-label{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

/* Colapso: esconder textos */
html[data-sb-collapsed="1"] .fp-sidebar .nav-label,
html[data-sb-collapsed="1"] .fp-sidebar .brand-name,
html[data-sb-collapsed="1"] .fp-sidebar .brand-role{ display:none; }
html[data-sb-collapsed="1"] .fp-sidebar .nav-section{ display:none; }
html[data-sb-collapsed="1"] .fp-sidebar .fp-nav{ gap:0; padding:10px 6px; }
html[data-sb-collapsed="1"] .fp-sidebar .nav-group{ gap:4px; }
html[data-sb-collapsed="1"] .fp-sidebar .nav-item{ grid-template-columns:1fr; justify-items:center; padding:10px 0; border-radius:14px; }

/* Rail hover → expande */
html[data-sb-collapsed="1"] .fp-sidebar:hover{
  width:var(--sb-expanded);
  box-shadow:0 18px 60px rgba(15,23,42,.22);
  z-index:60;
}
html[data-sb-collapsed="1"] .fp-sidebar:hover .nav-section{ display:block; }
html[data-sb-collapsed="1"] .fp-sidebar:hover .fp-nav{ gap:8px; padding:8px; }
html[data-sb-collapsed="1"] .fp-sidebar:hover .nav-group{ gap:6px; }
html[data-sb-collapsed="1"] .fp-sidebar:hover .nav-item{ grid-template-columns:24px 1fr; justify-items:start; padding:9px 10px; border-radius:12px; }
html[data-sb-collapsed="1"] .fp-sidebar:hover .nav-label{ display:block; }

/* Zona quente (hover) */
html[data-sb-collapsed="1"] .fp-sidebar::after{
  content:""; position:absolute; top:0; right:-12px; width:12px; height:100%;
}

/* ================================== */
/* ========== CARDS/BADGES ========== */
/* ================================== */
.card{
  background:var(--card-bg);
  border:1px solid var(--border);
  border-radius:12px;
  box-shadow:var(--shadow-1);
}
.card:hover{ border-color: color-mix(in srgb, var(--primary) 24%, var(--border)); }

/* KPI cards */
.kpi-grid{ display:grid; grid-template-columns:repeat(4,minmax(0,1fr)); gap:12px; }
@media (max-width:1024px){ .kpi-grid{ grid-template-columns:repeat(2,minmax(0,1fr)); } }
@media (max-width:520px){ .kpi-grid{ grid-template-columns:1fr; } }

.kpi{ border-radius:16px; padding:14px; color:#0b1220; box-shadow:var(--shadow-1); border:1px solid var(--border); background:var(--card-bg); }
.kpi .kpi-label{ font-size:13px; opacity:.9; }
.kpi .kpi-value{ font-weight:800; font-size:22px; line-height:1.1; margin-top:4px; }
.kpi--blue{   background: linear-gradient(180deg, #e6f0ff, #dbeafe); }
.kpi--violet{ background: linear-gradient(180deg, #efe5ff, #e9d5ff); }
.kpi--green{  background: linear-gradient(180deg, #e7fff2, #d1fae5); }
.kpi--amber{  background: linear-gradient(180deg, #fff5e5, #fee2b6); }
[data-theme="dark"] .kpi{ color:#eaf0ff; border-color: color-mix(in oklab, var(--border) 60%, transparent); }
[data-theme="dark"] .kpi--blue{   background: linear-gradient(180deg, #0b244a, #0f2d63); }
[data-theme="dark"] .kpi--violet{ background: linear-gradient(180deg, #2b1a55, #3a1f7a); }
[data-theme="dark"] .kpi--green{  background: linear-gradient(180deg, #0f3b29, #11543a); }
[data-theme="dark"] .kpi--amber{  background: linear-gradient(180deg, #4a2c0b, #633e0f); }

/* badges / chips */
.badge,.chip{
  background:linear-gradient(135deg, var(--accent), var(--accent-2));
  color:#fff; border:0; padding:2px 8px; border-radius:999px; font-size:12px;
}
.badge--green{ background: linear-gradient(135deg, var(--success), color-mix(in srgb, var(--success) 70%, black)); }
.badge--amber{ background: linear-gradient(135deg, var(--amber),  color-mix(in srgb, var(--amber) 70%, black)); }
.badge--pink { background: linear-gradient(135deg, var(--pink),   color-mix(in srgb, var(--pink) 70%, black)); }

/* Títulos com leve gradiente */
h1,.h1{
  background: linear-gradient(90deg,
    color-mix(in srgb, var(--fg) 86%, transparent),
    color-mix(in srgb, var(--primary) 50%, transparent) 60%,
    color-mix(in srgb, var(--violet) 50%, transparent)
  );
  -webkit-background-clip:text; background-clip:text; color:transparent;
}

/* ================================= */
/* ============ AUTH =============== */
/* ================================= */
.auth-wrap{ display:grid; place-items:center; min-height:100dvh; padding:20px; }
.auth-card{ width:min(560px,92vw); background:var(--card-bg); border:1px solid var(--border); border-radius:20px; box-shadow:var(--shadow-1); padding:18px; }
.auth-header{ display:grid; grid-template-columns:40px 1fr; gap:10px; align-items:center; margin-bottom:10px; }
.auth-title{ font-weight:800; font-size:20px; }
.auth-fields{ display:grid; gap:10px; }
.auth-label{ font-size:13px; color:var(--muted-fg); }
.auth-input{ width:100%; }
.auth-password{ display:grid; grid-template-columns:1fr auto; gap:8px; }
.badge-danger{ color:#b91c1c; background:#fee2e2; border:1px solid #fecaca; border-radius:10px; padding:8px 10px; font-size:13px; }
.text-muted{ color:var(--muted-fg); }
.small{ font-size:13px; }
.auth-actions{ display:flex; justify-content:space-between; gap:8px; }

/* =================================== */
/* ========== TOASTS/SPINNER ========= */
/* =================================== */
@keyframes spin{ to{ transform:rotate(360deg) } }
.spinner{
  display:inline-block; width:1em; height:1em;
  border:2px solid var(--border); border-top-color:var(--fg);
  border-radius:50%; animation:spin 900ms linear infinite; vertical-align:-2px;
}

/* ================================ */
/* ========== REDUCED MOTION ====== */
/* ================================ */
@media (prefers-reduced-motion: reduce){
  *,*::before,*::after{
    animation-duration:0.01ms !important; animation-iteration-count:1 !important;
    transition-duration:0.01ms !important; scroll-behavior:auto !important;
  }
}

/* ================================ */
/* ========== SCROLLBAR =========== */
/* ================================ */
:root{ scrollbar-color: color-mix(in srgb, var(--fg) 20%, transparent) transparent; scrollbar-width: thin; }
::-webkit-scrollbar{ width:10px; height:10px; }
::-webkit-scrollbar-thumb{ background: color-mix(in srgb, var(--fg) 16%, transparent); border-radius:10px; }
::-webkit-scrollbar-track{ background:transparent; }

/* A11y util */
.visually-hidden{
  position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0;
}
/* imprime só o conteúdo do plano */
@media print {
  header, aside, nav, .no-print { display: none !important; }
  main, body { padding: 0 !important; margin: 0 !important; }
}
