/* =======================================================================
   Tailwind layers (mantém se usares Tailwind)
   ======================================================================= */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ================================ */
/* ========== RESET BASE ========== */
/* ================================ */
*,
*::before,
*::after { box-sizing: border-box; }

html, body { height: 100%; }
html { -webkit-text-size-adjust: 100%; }

body{
  margin:0;
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  color:var(--fg);
  background:
    radial-gradient(1200px 800px at -10% -10%, rgba(59,130,246,.06), transparent 60%),
    radial-gradient(1000px 700px at 110% -10%, rgba(16,185,129,.04), transparent 60%),
    var(--bg);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  overscroll-behavior-y: none;
}

:focus { outline:none; }
:focus-visible { box-shadow: var(--ring); }
::selection {
  /* fallback + color-mix para browsers modernos */
  background: rgba(30,102,255,.18);
  @supports (color: color-mix(in srgb, red, blue)) {
    background: color-mix(in srgb, var(--primary) 24%, transparent);
  }
}
[data-auth-root]{ min-height:100dvh; }

/* =============================== */
/* ========== DESIGN TOKENS ====== */
/* =============================== */
/* LIGHT */
:root,
:root[data-theme="light"]{
  /* Base (LIGHT com contraste alto) */
  --bg:#f6f8fb;              /* fundo da página */
  --fg:#0b1220;              /* texto principal */
  --muted-fg:#5f6b7a;        /* texto secundário */
  --border:#e2e8f0;          /* linhas/bordas */

  /* Cards / Header */
  --card:#ffffff;
  --card-bg:var(--card);
  --header-bg: rgba(255,255,255,0.92);

  /* Admin home */
  --admin-hero-bg: linear-gradient(135deg, #f5f9ff 0%, #eef4ff 45%, #ffffff 100%);
  --admin-hero-border: color-mix(in srgb, rgba(30,102,255,0.35) 40%, var(--border));
  --admin-hero-shadow: 0 28px 60px rgba(15,23,42,.12);
  --admin-hero-fg: #0f172a;
  --admin-panel-bg: color-mix(in srgb, #ffffff 88%, transparent 12%);
  --admin-panel-ring: color-mix(in srgb, var(--primary) 12%, transparent);

  /* Sombras */
  --shadow-1: 0 8px 24px rgba(15,23,42,.06), 0 2px 6px rgba(15,23,42,.04);
  --shadow-2: 0 20px 60px rgba(15,23,42,.12), 0 4px 10px rgba(15,23,42,.06);

  /* Primários / acentos */
  --primary:#1e66ff;
  --primary-600:#1554e6;
  --accent:#7c3aed;
  --accent-2:#06b6d4;

  /* Paleta extra */
  --blue:#3b82f6;
  --violet:#7c3aed;
  --teal:#06b6d4;
  --pink:#ec4899;
  --amber:#f59e0b;

  /* Estado */
  --success:#10b981;
  --warning:#f59e0b;
  --danger:#ef4444;
  --info:#3b82f6;

  /* Botões e superfícies */
  --btn-bg:var(--card);
  --hover:#eef2f7;

  /* Focus ring (mais visível) */
  --ring:0 0 0 3px color-mix(in srgb, var(--primary) 28%, transparent);

  /* Sidebar */
  --sidebar-bg:#ffffff;
  --sidebar-fg:#0b1220;
  --sidebar-muted:#7b8797;
  --sidebar-hover:#eef2ff;
  --sidebar-active:#e5eeff;

  /* Sidebar sizes/anim */
  --sb-collapsed:64px;
  --sb-expanded:260px;
  --sb-ease:cubic-bezier(.18,.9,.22,1);
  --sb-dur:260ms;

  /* Larguras controladas pelos data-attrs no <html> */
  --sb-w:var(--sb-expanded);

  /* App Shell */
  --sidebar-w:var(--sb-w);
  --header-h:56px;

  /* Safe areas */
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
}

/* DARK */
:root[data-theme="dark"]{
  --bg:#0b0b10;
  --fg:#e7e9ee;
  --muted-fg:#a8b0bf;
  --border:#232730;

  --card:#111317;
  --card-bg:var(--card);
  --header-bg: rgba(17,19,23,.72);

  --admin-hero-bg: linear-gradient(135deg, rgba(15,23,42,.92) 0%, rgba(30,41,59,.82) 55%, rgba(17,24,39,.88) 100%);
  --admin-hero-border: color-mix(in srgb, rgba(148,163,184,0.55) 60%, transparent);
  --admin-hero-shadow: 0 26px 50px rgba(2,6,23,.75);
  --admin-hero-fg: #e2e8f0;
  --admin-panel-bg: color-mix(in srgb, rgba(15,23,42,.88) 70%, transparent);
  --admin-panel-ring: color-mix(in srgb, rgba(125,211,252,0.16) 40%, transparent);

  --primary:#6da7ff;
  --primary-600:#4e8dff;

  --sidebar-bg:#111317;
  --sidebar-fg:#e7e9ee;
  --sidebar-muted:#9aa6b2;
  --sidebar-hover:#161a20;
  --sidebar-active:#1b2130;

  --accent:#8b5cf6;
  --accent-2:#22d3ee;

  --pink:#f472b6;
  --amber:#fbbf24;
}

/* Fallback automático se não houver data-theme */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]){ 
    --bg:#0b0b10; --fg:#e7e9ee; --muted-fg:#a8b0bf; --border:#232730;
    --card:#111317; --card-bg:#111317; --header-bg: rgba(17,19,23,.72);
    --primary:#6da7ff; --primary-600:#4e8dff;
    --sidebar-bg:#111317; --sidebar-fg:#e7e9ee; --sidebar-muted:#9aa6b2;
    --sidebar-hover:#161a20; --sidebar-active:#1b2130;
  }
}

/* Estado da sidebar (compat com attrs legados) */
:root { --sb-w: var(--sb-expanded); }
html[data-sb-pinned="0"]{ --sb-w: var(--sb-collapsed); }
html[data-sb-pinned="1"][data-sb-collapsed="1"]{ --sb-w: var(--sb-collapsed); }
html[data-sb-pinned="1"]:not([data-sb-collapsed="1"]){ --sb-w: var(--sb-expanded); }
html[data-sb-collapsed="1"],
html[data-sidebar="collapsed"]{
  --sb-w:var(--sb-collapsed);
  --sidebar-w:var(--sb-collapsed);
}

/* ================================ */
/* ========== ELEMENTARES ========= */
/* ================================ */
a{ color:inherit; text-decoration:none; }
button{ border:0; background:none; color:inherit; font:inherit; cursor:pointer; }
input,select,textarea{
  color:inherit; background:var(--card-bg); border:1px solid var(--border);
  border-radius:10px; padding:10px 12px; outline:none;
}
input:focus,select:focus,textarea:focus{ box-shadow:var(--ring); border-color:var(--primary); }
.focus-ring{ border-radius:18px; transition: box-shadow .18s ease, transform .18s ease; }
.focus-ring:focus-visible{
  outline:none;
  box-shadow:0 0 0 3px color-mix(in srgb, var(--primary) 22%, transparent),
             0 0 0 6px color-mix(in srgb, var(--primary) 12%, transparent);
}

/* ============================== */
/* ========== BOTÕES ============ */
/* ============================== */
.btn{
  display:inline-flex; align-items:center; justify-content:center;
  gap:8px; padding:10px 14px; border-radius:12px;
  border:1px solid var(--border); background:var(--btn-bg); color:var(--fg);
  transition: filter .12s ease, transform .12s ease, background .12s ease, border-color .12s ease;
}
.btn:hover{ filter:brightness(.985); }
.btn:active{ transform:translateY(.5px); }
.btn:disabled{ opacity:.6; cursor:not-allowed; }
.btn.primary{
  background:linear-gradient(180deg, color-mix(in srgb, var(--primary) 96%, transparent), var(--primary-600));
  color:#fff; border-color: color-mix(in srgb, var(--primary-600) 80%, var(--primary));
  box-shadow: 0 6px 18px color-mix(in srgb, var(--primary) 28%, transparent);
}
.btn.primary:hover{ filter:none; background:var(--primary-600); }
.btn.ghost{ background:transparent; }
.btn.ghost:hover{ background:var(--sidebar-hover); }
.btn.icon{ padding:8px; border-radius:10px; width:36px; height:36px; }
.btn.icon:hover{ background:var(--sidebar-hover); }
.btn.chip{ padding:4px 8px; border-radius:999px; }

/* ================================ */
/* ========== APP SHELL =========== */
/* ================================ */
.fp-shell{
  display:grid;
  min-height:100dvh;
  grid-template-columns: var(--sb-w) minmax(0,1fr);
}
.fp-main,.fp-content{ min-width:0; width:100%; }
.fp-main{ padding:24px; }

/* Header (sticky global) */
.fp-header{
  position:sticky; top:0; z-index:40;
  background: var(--header-bg);
  border-bottom:1px solid var(--border);
  backdrop-filter:saturate(140%) blur(6px);
}
@supports not (backdrop-filter: blur(6px)) {
  .fp-header{ background: var(--card); }
}
.fp-header-inner{
  display:grid; grid-template-columns:minmax(240px,1fr) auto;
  align-items:center; gap:12px; padding:10px 16px;
}

/* ================================= */
/* ========== SIDEBAR ============== */
/* ================================= */
.fp-nav{ display:grid; gap:8px; padding:8px; }
.nav-section{ margin:8px 6px 4px; color:var(--sidebar-muted); font-size:12px; text-transform:uppercase; }
.nav-group{ display:grid; gap:6px; }

.fp-sidebar .nav-item{
  display:grid; grid-template-columns:24px 1fr; align-items:center; gap:10px;
  padding:9px 10px; border-radius:12px; color:var(--sidebar-fg);
  background:transparent;
  transition: background var(--sb-dur) var(--sb-ease), color .18s ease;
}
.fp-sidebar .nav-item:hover{ background:var(--sidebar-hover); }

.fp-sidebar .nav-item[data-active="true"],
.fp-sidebar .nav-item[aria-current="page"],
.fp-sidebar a.nav-item[aria-current="page"]{
  background:var(--sidebar-active);
  color: color-mix(in srgb, var(--primary) 22%, var(--sidebar-fg));
  box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--primary) 16%, transparent);
}

/* Ícone/label */
.nav-icon{ display:inline-flex; align-items:center; justify-content:center; }
.nav-icon svg{ width:20px; height:20px; }
.nav-label{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

/* Colapso: esconder textos */
html[data-sb-collapsed="1"] .fp-sidebar .nav-label,
html[data-sb-collapsed="1"] .fp-sidebar .brand-name,
html[data-sb-collapsed="1"] .fp-sidebar .brand-role{ display:none; }
html[data-sb-collapsed="1"] .fp-sidebar .nav-section{ display:none; }
html[data-sb-collapsed="1"] .fp-sidebar .fp-nav{ gap:0; padding:10px 6px; }
html[data-sb-collapsed="1"] .fp-sidebar .nav-group{ gap:4px; }
html[data-sb-collapsed="1"] .fp-sidebar .nav-item{ grid-template-columns:1fr; justify-items:center; padding:10px 0; border-radius:14px; }

/* Rail hover → expande (peek) */
html[data-sb-collapsed="1"] .fp-sidebar:hover{
  width:var(--sb-expanded);
  box-shadow:0 18px 60px rgba(15,23,42,.22);
  z-index:60;
}
html[data-sb-collapsed="1"] .fp-sidebar:hover .nav-section{ display:block; }
html[data-sb-collapsed="1"] .fp-sidebar:hover .fp-nav{ gap:8px; padding:8px; }
html[data-sb-collapsed="1"] .fp-sidebar:hover .nav-group{ gap:6px; }
html[data-sb-collapsed="1"] .fp-sidebar:hover .nav-item{ grid-template-columns:24px 1fr; justify-items:start; padding:9px 10px; border-radius:12px; }
html[data-sb-collapsed="1"] .fp-sidebar:hover .nav-label{ display:block; }

/* Zona quente (hover) */
html[data-sb-collapsed="1"] .fp-sidebar::after{
  content:""; position:absolute; top:0; right:-12px; width:12px; height:100%;
}

/* ================================== */
/* ========== CARDS/BADGES ========== */
/* ================================== */
.card{
  background:var(--card-bg);
  border:1px solid var(--border);
  border-radius:12px;
  box-shadow:var(--shadow-1);
}
.card:hover{ border-color: color-mix(in srgb, var(--primary) 22%, var(--border)); }

/* KPI cards */
.kpi-grid{ display:grid; grid-template-columns:repeat(4,minmax(0,1fr)); gap:12px; }
@media (max-width:1024px){ .kpi-grid{ grid-template-columns:repeat(2,minmax(0,1fr)); } }
@media (max-width:520px){ .kpi-grid{ grid-template-columns:1fr; } }

.kpi{
  border-radius:16px; padding:14px; color:var(--fg);
  box-shadow:var(--shadow-1); border:1px solid var(--border); background:var(--card-bg);
}
.kpi .kpi-label{ font-size:13px; opacity:.9; }
.kpi .kpi-value{ font-weight:800; font-size:22px; line-height:1.1; margin-top:4px; }
.kpi--blue{   background: linear-gradient(180deg, #e9f1ff, #deebff); }
.kpi--violet{ background: linear-gradient(180deg, #f0e8ff, #eadbff); }
.kpi--green{  background: linear-gradient(180deg, #e8fff3, #d4fae8); }
.kpi--amber{  background: linear-gradient(180deg, #fff6e7, #fee6bd); }
:root[data-theme="dark"] .kpi{ color:#eef3ff; border-color: color-mix(in srgb, var(--border) 60%, transparent); }
:root[data-theme="dark"] .kpi--blue{   background: linear-gradient(180deg, #0b244a, #0f2d63); }
:root[data-theme="dark"] .kpi--violet{ background: linear-gradient(180deg, #2b1a55, #3a1f7a); }
:root[data-theme="dark"] .kpi--green{  background: linear-gradient(180deg, #0f3b29, #11543a); }
:root[data-theme="dark"] .kpi--amber{  background: linear-gradient(180deg, #4a2c0b, #633e0f); }

/* badges / chips */
.badge,.chip{
  background:linear-gradient(135deg, var(--accent), var(--accent-2));
  color:#fff; border:0; padding:2px 8px; border-radius:999px; font-size:12px;
}
.badge--green{ background: linear-gradient(135deg, var(--success), color-mix(in srgb, var(--success) 70%, black)); }
.badge--amber{ background: linear-gradient(135deg, var(--amber),  color-mix(in srgb, var(--amber) 70%, black)); }
.badge--pink { background: linear-gradient(135deg, var(--pink),   color-mix(in srgb, var(--pink) 70%, black)); }

/* Títulos com leve gradiente */
h1,.h1{
  background: linear-gradient(90deg,
    color-mix(in srgb, var(--fg) 92%, transparent),
    color-mix(in srgb, var(--primary) 48%, transparent) 60%,
    color-mix(in srgb, var(--violet) 46%, transparent)
  );
  -webkit-background-clip:text; background-clip:text; color:transparent;
}

/* ================================= */
/* ============ AUTH =============== */
/* ================================= */
.auth-wrap{ display:grid; place-items:center; min-height:100dvh; padding:20px; }
.auth-card{ width:min(560px,92vw); background:var(--card-bg); border:1px solid var(--border); border-radius:20px; box-shadow:var(--shadow-1); padding:18px; }
.auth-header{ display:grid; grid-template-columns:40px 1fr; gap:10px; align-items:center; margin-bottom:10px; }
.auth-title{ font-weight:800; font-size:20px; }
.auth-fields{ display:grid; gap:10px; }
.auth-label{ font-size:13px; color:var(--muted-fg); }
.auth-input{ width:100%; }
.auth-password{ display:grid; grid-template-columns:1fr auto; gap:8px; }
.badge-danger{ color:#b91c1c; background:#fee2e2; border:1px solid #fecaca; border-radius:10px; padding:8px 10px; font-size:13px; }
.text-muted{ color:var(--muted-fg); }
.small{ font-size:13px; }
.auth-actions{ display:flex; justify-content:space-between; gap:8px; }

/* =================================== */
/* ========== TOASTS/SPINNER ========= */
/* =================================== */
@keyframes spin{ to{ transform:rotate(360deg) } }
.spinner{
  display:inline-block; width:1em; height:1em;
  border:2px solid var(--border); border-top-color:var(--fg);
  border-radius:50%; animation:spin 900ms linear infinite; vertical-align:-2px;
}

/* ================================ */
/* ========== REDUCED MOTION ====== */
/* ================================ */
@media (prefers-reduced-motion: reduce){
  *,*::before,*::after{
    animation-duration:0.01ms !important; animation-iteration-count:1 !important;
    transition-duration:0.01ms !important; scroll-behavior:auto !important;
  }
}

/* ================================ */
/* ========== SCROLLBAR =========== */
/* ================================ */
:root{ scrollbar-color: color-mix(in srgb, var(--fg) 20%, transparent) transparent; scrollbar-width: thin; }
::-webkit-scrollbar{ width:10px; height:10px; }
::-webkit-scrollbar-thumb{ background: color-mix(in srgb, var(--fg) 16%, transparent); border-radius:10px; }
::-webkit-scrollbar-track{ background:transparent; }

/* A11y util */
.visually-hidden{
  position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0;
}

/* imprime só o conteúdo do plano */
@media print {
  header, aside, nav, .no-print { display: none !important; }
  main, body { padding: 0 !important; margin: 0 !important; }
}
