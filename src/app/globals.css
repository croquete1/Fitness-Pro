/* ================================ */
/* ========== RESET BASE ========== */
/* ================================ */
*,
*::before,
*::after { box-sizing: border-box; }

html, body { height: 100%; }
html { -webkit-text-size-adjust: 100%; }
body {
  margin: 0;
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  color: var(--fg);
  /* fallback + mix */
  background: var(--bg);
  background:
    radial-gradient(1200px 800px at -10% -10%, rgba(59,130,246,.08), transparent 60%),
    radial-gradient(1000px 700px at 110% -10%, rgba(16,185,129,.05), transparent 60%),
    var(--bg);
}

/* Melhor foco acessível */
:focus { outline: none; }
:focus-visible { box-shadow: var(--ring); }

/* Seleção de texto */
::selection { background: color-mix(in srgb, var(--primary) 25%, transparent); }

/* =============================== */
/* ========== DESIGN TOKENS ====== */
/* =============================== */
:root{
  /* Base */
  --bg:#f7f9fc;
  --fg:#0f172a;
  --muted-fg:#5b677a;
  --border:#e8ecf2;

  /* Card / Header */
  --card:#ffffff;
  --card-bg:var(--card);
  --header-bg: rgba(255,255,255,0.78);

  /* Acentos */
  --primary:#3b82f6;
  --primary-600:#2563eb;
  --accent:#7c3aed;
  --accent-2:#06b6d4;

  /* Estado */
  --success:#10b981;
  --warning:#f59e0b;
  --danger:#ef4444;
  --info:#3b82f6;

  /* Botões */
  --btn-bg:var(--card);
  --hover:#eef2f7;

  /* Focus ring */
  --ring:0 0 0 3px rgba(59,130,246,.3);

  /* Sidebar */
  --sidebar-bg:#ffffff;
  --sidebar-fg:#0f172a;
  --sidebar-muted:#7b8797;
  --sidebar-hover:#eef2f7;
  --sidebar-active:#e5eeff;

  /* Raio e sombra */
  --radius:12px;
  --shadow-1:0 2px 8px rgba(15,23,42,.06), 0 1px 3px rgba(15,23,42,.04);

  /* Sidebar (expand/colapse) */
  --sb-collapsed:64px;
  --sb-expanded:260px;
  --sb-ease:cubic-bezier(.18,.9,.22,1);
  --sb-dur:260ms;

  /* Larguras efetivas */
  --sb-w:var(--sb-expanded);

  /* Compat App Shell */
  --sidebar-w:var(--sb-w);
  --header-h:56px;
}

/* Alternador por atributo (duplo compat) */
html[data-sb-collapsed="1"],
html[data-sidebar="collapsed"]{
  --sb-w:var(--sb-collapsed);
  --sidebar-w:var(--sb-collapsed);
}

[data-auth-root]{ min-height:100dvh; }

/* =============================== */
/* ========== DARK MODE ========== */
/* =============================== */
[data-theme="dark"]{
  --bg:#0d1117;
  --fg:#e5e7eb;
  --muted-fg:#a7b1c2;
  --border:#1f2a37;

  --card:#0f141b;
  --card-bg:var(--card);
  --header-bg: rgba(16,24,40,.55);

  --primary:#60a5fa;
  --primary-600:#3b82f6;

  --sidebar-bg:#0f141b;
  --sidebar-fg:#e5e7eb;
  --sidebar-muted:#9aa6b2;
  --sidebar-hover:#141b23;
  --sidebar-active:#182230;

  --accent:#8b5cf6;
  --accent-2:#22d3ee;
}

/* ================================ */
/* ========== ELEMENTARES ========= */
/* ================================ */
a{ color:inherit; text-decoration:none; }
button{ border:0; background:none; color:inherit; font:inherit; cursor:pointer; }
input,select,textarea{
  color:inherit; background:var(--card-bg); border:1px solid var(--border);
  border-radius:10px; padding:10px 12px; outline:none;
}
input:focus,select:focus,textarea:focus{ box-shadow:var(--ring); border-color:var(--primary); }

/* ============================== */
/* ========== BOTÕES ============ */
/* ============================== */
.btn{
  display:inline-flex; align-items:center; justify-content:center;
  gap:8px; padding:10px 14px; border-radius:12px;
  border:1px solid var(--border); background:var(--btn-bg); color:var(--fg);
  transition: filter .12s ease, transform .12s ease, background .12s ease, border-color .12s ease;
}
.btn:hover{ filter:brightness(.98); }
.btn:active{ transform:translateY(.5px); }
.btn:disabled{ opacity:.6; cursor:not-allowed; }

.btn.primary{ background:var(--primary); color:#fff; border-color:var(--primary-600); }
.btn.primary:hover{ background:var(--primary-600); }

.btn.ghost{ background:transparent; }
.btn.ghost:hover{ background:var(--sidebar-hover); }

.btn.icon{ padding:8px; border-radius:10px; width:36px; height:36px; }
.btn.icon:hover{ background:var(--sidebar-hover); }

.btn.chip{ padding:4px 6px; border-radius:999px; }

/* ================================ */
/* ========== APP SHELL =========== */
/* ================================ */
.fp-shell{
  display:grid;
  min-height:100dvh;
  grid-template-columns: var(--sb-w) minmax(0,1fr);
}
.fp-main,.fp-content{ min-width:0; width:100%; }
.fp-main{ padding:24px; }

/* Header */
.fp-header{
  position:sticky; top:0; z-index:40;
  background: var(--bg);
  background: color-mix(in srgb, var(--bg) 88%, var(--card) 12%);
  border-bottom:1px solid var(--border);
  backdrop-filter:saturate(140%) blur(6px);
}
.fp-header-inner{
  display:grid; grid-template-columns:minmax(0,1fr) auto; align-items:center; gap:12px;
  padding:10px 16px;
}

/* Compat classes (RoleSidebar/app-shell) */
.app-shell{ padding-left:var(--sidebar-w); transition:padding-left .18s ease; }
.app-header{
  position:sticky; top:0; z-index:30; height:var(--header-h);
  display:flex; align-items:center; gap:10px; padding:0 12px;
  border-bottom:1px solid var(--border); background:var(--card-bg);
}

/* ================================= */
/* ========== SIDEBAR ============== */
/* ================================= */
.fp-sidebar{
  width:var(--sb-w);
  background:var(--sidebar-bg);
  border-right:1px solid var(--border);
  transition: width var(--sb-dur) var(--sb-ease), box-shadow 200ms ease;
  position:relative; z-index:30; will-change:width; overflow:visible;
}

/* Cabeçalho */
.fp-sb-head{ display:grid; grid-template-columns:1fr auto; align-items:center; padding:10px; gap:8px; min-height:56px; }
.fp-sb-brand{ display:flex; align-items:center; gap:10px; }
.fp-sb-brand .logo{
  width:32px; height:32px; border-radius:10px;
  display:inline-flex; align-items:center; justify-content:center;
  object-fit:contain; background:transparent; border:0;
}
.fp-sb-actions{ display:inline-flex; gap:6px; }

/* Navegação — escopada para não colidir com outros .nav-item */
.fp-nav{ display:grid; gap:8px; padding:8px; }
.nav-section{ margin:8px 6px 4px; color:var(--sidebar-muted); font-size:12px; text-transform:uppercase; }
.nav-group{ display:grid; gap:6px; }

.fp-sidebar .nav-item{
  display:grid; grid-template-columns:24px 1fr; align-items:center; gap:10px;
  padding:9px 10px; border-radius:12px; color:var(--sidebar-fg);
  transition: background var(--sb-dur) var(--sb-ease);
}
.fp-sidebar .nav-item:hover{ background:var(--sidebar-hover); }
.fp-sidebar .nav-item[data-active="true"]{ background:var(--sidebar-active); }

.nav-icon{ display:inline-flex; align-items:center; justify-content:center; }
.nav-icon svg{ width:20px; height:20px; }
.nav-label{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

/* Rail (colapsada) */
html[data-sb-collapsed="1"] .fp-sidebar .nav-label,
html[data-sidebar="collapsed"] .fp-sidebar .nav-label{ display:none; }
html[data-sb-collapsed="1"] .fp-sidebar .nav-section,
html[data-sidebar="collapsed"] .fp-sidebar .nav-section{ display:none; }
html[data-sb-collapsed="1"] .fp-sidebar .fp-nav,
html[data-sidebar="collapsed"] .fp-sidebar .fp-nav{ gap:0; padding:10px 6px; }
html[data-sb-collapsed="1"] .fp-sidebar .nav-group,
html[data-sidebar="collapsed"] .fp-sidebar .nav-group{ gap:4px; }
html[data-sb-collapsed="1"] .fp-sidebar .nav-item,
html[data-sidebar="collapsed"] .fp-sidebar .nav-item{ grid-template-columns:1fr; justify-items:center; padding:10px 0; border-radius:14px; }

/* Rail → hover para expandir (overlay) */
html[data-sb-collapsed="1"] .fp-sidebar:hover,
html[data-sidebar="collapsed"] .fp-sidebar:hover{
  width:var(--sb-expanded);
  box-shadow:0 18px 60px rgba(15,23,42,.22);
  z-index:60;
}
html[data-sb-collapsed="1"] .fp-sidebar:hover .nav-section,
html[data-sidebar="collapsed"] .fp-sidebar:hover .nav-section{ display:block; }
html[data-sb-collapsed="1"] .fp-sidebar:hover .fp-nav,
html[data-sidebar="collapsed"] .fp-sidebar:hover .fp-nav{ gap:8px; padding:8px; }
html[data-sb-collapsed="1"] .fp-sidebar:hover .nav-group,
html[data-sidebar="collapsed"] .fp-sidebar:hover .nav-group{ gap:6px; }
html[data-sb-collapsed="1"] .fp-sidebar:hover .nav-item,
html[data-sidebar="collapsed"] .fp-sidebar:hover .nav-item{ grid-template-columns:24px 1fr; justify-items:start; padding:9px 10px; border-radius:12px; }
html[data-sb-collapsed="1"] .fp-sidebar:hover .nav-label,
html[data-sidebar="collapsed"] .fp-sidebar:hover .nav-label{ display:block; }

/* Ampliar zona quente (hover) */
html[data-sb-collapsed="1"] .fp-sidebar::after,
html[data-sidebar="collapsed"] .fp-sidebar::after{
  content:""; position:absolute; top:0; right:-12px; width:12px; height:100%;
}

/* Header: esconder toggles duplicados (defensivo) */
.fp-header .btn-toggle,
.fp-header .btn-pin,
.fp-header [data-role="sb-toggle"],
.fp-header [data-role="sb-pin"],
.btn-toggle--header,
.btn-pin--header{ display:none !important; }

/* ================================== */
/* ========== CARDS/BADGES ========== */
/* ================================== */
.card{
  background:var(--card-bg);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow-1);
}

.badge,.chip{
  background:linear-gradient(135deg, var(--accent), var(--accent-2));
  color:#fff; border:0; padding:2px 8px; border-radius:999px; font-size:12px;
}

/* ================================= */
/* ============ AUTH =============== */
/* ================================= */
.auth-wrap{ display:grid; place-items:center; min-height:100dvh; padding:20px; }
.auth-card{ width:min(560px,92vw); background:var(--card-bg); border:1px solid var(--border); border-radius:20px; box-shadow:var(--shadow-1); padding:18px; }
.auth-header{ display:grid; grid-template-columns:40px 1fr; gap:10px; align-items:center; margin-bottom:10px; }
.auth-title{ font-weight:800; font-size:20px; }
.auth-fields{ display:grid; gap:10px; }
.auth-label{ font-size:13px; color:var(--muted-fg); }
.auth-input{ width:100%; }
.auth-password{ display:grid; grid-template-columns:1fr auto; gap:8px; }
.badge-danger{ color:#b91c1c; background:#fee2e2; border:1px solid #fecaca; border-radius:10px; padding:8px 10px; font-size:13px; }
.text-muted{ color:var(--muted-fg); }
.small{ font-size:13px; }
.auth-actions{ display:flex; justify-content:space-between; gap:8px; }

/* ===================================== */
/* ========== ICONS & PIN FX =========== */
/* ===================================== */
.nav-emoji{ font-size:18px; line-height:1; width:24px; text-align:center; }
.btn-pin.is-pinned svg{ transform:rotate(35deg); transition:transform 200ms ease; }

/* =================================== */
/* ========== TOASTS/SPINNER ========= */
/* =================================== */
@keyframes fp-spin{ from{ transform:rotate(0deg) } to{ transform:rotate(360deg) } }
@keyframes spin{ to{ transform:rotate(360deg) } }

.toast-viewport{
  position:fixed; right:16px; bottom:16px; z-index:100000;
  display:grid; gap:8px;
}
.toast{
  text-align:left;
  padding:10px 12px;
  border-radius:12px;
  border:1px solid var(--border);
  background:var(--card-bg);
  color:var(--fg);
  box-shadow:0 8px 28px rgba(0,0,0,.08);
  cursor:pointer;
}
.toast-title{ font-weight:700; margin-bottom:2px; }
.toast-msg{ opacity:.95; }
.toast--success{ border-color: color-mix(in srgb, var(--success) 40%, var(--border)); }
.toast--warning{ border-color: color-mix(in srgb, var(--warning) 40%, var(--border)); }
.toast--error  { border-color: color-mix(in srgb, var(--danger)  40%, var(--border)); }

.spinner{
  display:inline-block; width:1em; height:1em;
  border:2px solid var(--border); border-top-color:var(--fg);
  border-radius:50%; animation:spin 900ms linear infinite;
  vertical-align:-2px;
}

/* ================================ */
/* ========== REDUCED MOTION ====== */
/* ================================ */
@media (prefers-reduced-motion: reduce){
  *,*::before,*::after{ animation-duration:0.01ms !important; animation-iteration-count:1 !important; transition-duration:0.01ms !important; scroll-behavior:auto !important; }
}

/* ================================ */
/* ========== SCROLLBAR =========== */
/* ================================ */
:root{
  scrollbar-color: color-mix(in srgb, var(--fg) 20%, transparent) transparent;
  scrollbar-width: thin;
}
::-webkit-scrollbar{ width:10px; height:10px; }
::-webkit-scrollbar-thumb{
  background: color-mix(in srgb, var(--fg) 16%, transparent);
  border-radius: 10px;
}
::-webkit-scrollbar-track{ background: transparent; }

/* Utilitário de acessibilidade */
.visually-hidden{
  position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0;
}
